---
layout: post
title: 람다
comments: true
category: Java
---

## 람다
자바8 부터 람다 표현식(Lambda Expression)이 등장했다. 또한 자바8의 특징을 말하라고 하면 람다가 가능해 졌다는 것이라고 할 수 있다. <br>
우선 람다란 하나의 메서드를 식(expression)으로 표현하는 것을 의미한다. 자바의 메서드의 특징은 메서드를 만들려고 하면 이 메서드는 반드시 클래스안에 있어야 한다는 점이다. 여기서 한가지 불편한 점이 있다. 메서드의 기능이 특정한 클래스에 구속되지 않는다면 어떤 클래스에 넣을지 난감하다. 또한 이런 메서드를 뜬급없는 클래스에 넣는다면 단일 책임의 원칙에 위배 된다. 그래서 이 메서드만을 위해 클래스를 하나 더 만드는 것도 마음에 드는 방식이 아니다. <br><br>
이런 상황에서 람다를 유용하게 사용할 수 있다. 특정 메서드가 필요한 곳에 람다를 넣어서 메서드를 대체할 수 있기 때문이다. 
좀 인위적이지만 간단한 예를 들어보자 우선 자바의 Runnable을 사용학위해서는 Runnable 인터페이스를 구현한 구현체를 사용해야한다. 그런데 내가 필요한건 1초마다 "안녕하세요"를 찍어주는 간단한 것이다. 이를 위해 Runnable을 위한 클래스를 만들고 거기다 run메서드를 작성해야한다.

```java
public class Hello implements Runnable{
    public void Run(){
        System.out.println("안녕하세요");
    }
}

/////////////////////
사용하는곳

public void main(String[] args){
    Runnable runnable =new Hello();
}
```
위와같이 간단한 것을위해 클래스를 만드는 일은 좀 귀찮은 일이다. 이제 이것을 람다로 대체하는 방법을 보자

```java
public void main(String[] args){
    Runnable runnable =()->{
        System.out.println("안녕하세요");
    };
}
```
위의 코드가 전부이다 람다를 이용해서 클래스를 만들고 메서드를 정의하는 것을 하지 않고 표현식으로 대체했다. 람다는 이처럼  코드를 간결하게 만들어주는 힘이있다.

## 람다 표현식 사용법

람다 표현식은 메서드 작성하는 방법에서 반환 타입, 메서드 이름을 빼면 된다.
![image](https://user-images.githubusercontent.com/47367509/72666997-a4870080-3a5a-11ea-8253-65f15551afee.png)

코드로 보면 아래와 같다
```java
int sumArr(int[] arr){
    int r = 0;
    for(int i:arr){
        r+=i;
    }
    return r;
}

(int[] arr)->{
    int r = 0;
    for(int i:arr){
        r+=i;
    }
    return r;
}
```

여기서 몇가지 문법이 더 있다 우선 반환값을 줄때 return을 생략할 수 있다. 생략할 수 있는 경우는 람다식이 return문 하나로 구성되어 있을때이다.

```java
(a,b)-> {return a>b?a:B;};

위의 경우는 아래와 같이 return문을 삭제 가능
(a,b)-> a>b?a:b
```

여기서 중요한건 return을 생략한 경우 a>b?a:b뒤에 세미클론이 없다는 것이다. 이는 문장이 아닌 식이기때문에 안붙은 것이다. 또한 return문을 생략한 경우에는 중괄호도 생략할 수 있다.

<br>
다음으로는 봐야 하는것은 매개변수 이다. 위의 코드에서 매개변수의 타입을 지정하지 않았다. 이는 매개변수의 타입을 추론해서 자동으로 맞춰주기 때문이다. 물론 매개변수를 넣어 줘도 된다.

## 함수형 인터페이스
위에서 자바에서 메서드는 클래스에 포함 되어야 한다고 했는데 람다식은 어떻게 클래스에 포함 되지 않고 사용할 수 있는가 하면 람다식은 엄밀히 말하면 익명 클래스안에 있는 메서드 여서 사용할 수 있는 것이다. 

```java
(a,b)-> a>b?a:b

위의 람다식은  아래의 익명클래스와 동등하다
new Object{
    int compare(int a,int b){
        return a>b?a:b;
    }
}
```
람다식이 익명클래스와 동일하기 때문에 식을 변수처럼 사용할 수 있는 것이다. 람다식은 작상한 것으로 변수처럼 매개변수로 사용될 수 있다. 마치 자바스크립트의 콜백함수와 같은 것이다.

```java
int[] arr = new int[5];
Arrays.setAll(arr,(i)->(int)(Math.random()*5)+1);
```
위의 setAll의 매개변수로 람다식이 사용되는 것을보자 분명 매개변수에는 특정 타입을 가진 값이 들어가야하는데 설명한 것처럼 람다식으로도 값이 들어가진다. 이런것을 가능하게 하는 것이 함수형 인터페이스 덕분이다. 이 인터페이스는 람다식을 위해 만들어지는 인터페이스를 의미한다. 

<br>우선 함수형 인터페이스를 만들어야 한다.

```java
@FunctionalInterface
public interface LambdaInter {
    int sum(int a,int b);
}
```
위처럼 인터페이스에 메서드를 하나 선언하고 위에 FunctionalInterface어노테이션을 선언하면 컴파일러가 자동으로 이 인터페이스가 함수형 인터페이스라는 것을 인지한다. 여기서 중요한것은 함수형 인터페이스는 반드시 메서드를 하나만 가지고 있어야한다.

<br> 그다음으로 이 함수형 인터페이스를 사용하는 방법을 보자

```java
LambdaInter lambdaInter = (int a,int b)-> a+b; // lambdaInter 에 익명 클래스를 준것
System.out.println(lambdaInter.sum(2,5));
```
위처럼 함수형 인터페이스에 바로 람다식을 넣을 수 있다. 이를 이용하면 다른 메서드의 매개변수로 함수형 인터페이스를 사용하고 메서드를 사용하는 곳에서 함수형 인터페이스가 들어갈 자리에 람다식을 이용해서 처리할 수 있다. 이렇게 하면 장점으로 메서드를 변수처럼 여러곳에서 주고 받을 수 있는 것이다.


